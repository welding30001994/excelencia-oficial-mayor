<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Buscador de Precios con Carrito</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #2c3e50, #34495e);
            color: white;
            padding: 20px;
            text-align: center;
        }

        .header h1 {
            font-size: clamp(1.8em, 4vw, 2.5em);
            margin-bottom: 10px;
        }

        .header p {
            opacity: 0.9;
            font-size: clamp(0.9em, 2.5vw, 1.1em);
        }

        .search-section {
            padding: 20px;
            background: #f8f9fa;
        }

        .search-box {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-bottom: 15px;
        }

        @media (min-width: 768px) {
            .search-box {
                flex-direction: row;
            }
        }

        #codigoInput {
            flex: 1;
            padding: 12px 15px;
            border: 2px solid #ddd;
            border-radius: 10px;
            font-size: 16px;
            transition: border-color 0.3s;
        }

        #codigoInput:focus {
            outline: none;
            border-color: #667eea;
        }

        #buscarBtn {
            padding: 12px 20px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            cursor: pointer;
            transition: transform 0.2s;
            min-width: 120px;
        }

        #buscarBtn:hover {
            transform: translateY(-2px);
        }

        .result-section {
            padding: 20px;
            display: none;
        }

        .producto-info {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            border-left: 5px solid #667eea;
            margin-bottom: 15px;
        }

        .precios {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
            margin-top: 15px;
        }

        @media (min-width: 480px) {
            .precios {
                grid-template-columns: 1fr 1fr;
            }
        }

        .precio-card {
            background: linear-gradient(135deg, #f093fb, #f5576c);
            color: white;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            cursor: pointer;
            transition: transform 0.2s;
            min-height: 120px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .precio-card:hover {
            transform: translateY(-5px);
        }

        .precio-card.mayor {
            background: linear-gradient(135deg, #4facfe, #00f2fe);
        }

        .precio-card.seleccionado {
            border: 3px solid #2ecc71;
            box-shadow: 0 0 20px rgba(46, 204, 113, 0.5);
        }

        .precio-card h3 {
            font-size: clamp(0.9em, 3vw, 1.1em);
            margin-bottom: 8px;
            opacity: 0.9;
        }

        .precio-valor {
            font-size: clamp(1.5em, 4vw, 2em);
            font-weight: bold;
        }

        .cantidad-section {
            margin: 15px 0;
            text-align: center;
        }

        .cantidad-controls {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            margin-top: 10px;
        }

        .btn-cantidad {
            width: 40px;
            height: 40px;
            border: none;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            font-size: 1.2em;
            cursor: pointer;
            transition: transform 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .btn-cantidad:hover {
            transform: scale(1.1);
        }

        .btn-cantidad:disabled {
            background: #bdc3c7;
            cursor: not-allowed;
            transform: none;
        }

        .cantidad-display {
            font-size: 1.5em;
            font-weight: bold;
            min-width: 50px;
            text-align: center;
        }

        .agregar-carrito {
            margin-top: 15px;
            padding: 12px 20px;
            background: linear-gradient(135deg, #2ecc71, #27ae60);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            cursor: pointer;
            width: 100%;
            transition: transform 0.2s;
        }

        .agregar-carrito:hover {
            transform: translateY(-2px);
        }

        .agregar-carrito:disabled {
            background: #bdc3c7;
            cursor: not-allowed;
            transform: none;
        }

        .carrito-section {
            padding: 20px;
            background: #f8f9fa;
            border-top: 2px solid #e9ecef;
        }

        .carrito-header {
            margin-bottom: 15px;
            text-align: center;
        }

        .carrito-items {
            max-height: 400px;
            overflow-y: auto;
            margin-bottom: 15px;
        }

        .carrito-item {
            display: flex;
            flex-direction: column;
            gap: 10px;
            padding: 15px;
            background: white;
            border-radius: 10px;
            margin-bottom: 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        @media (min-width: 768px) {
            .carrito-item {
                flex-direction: row;
                justify-content: space-between;
                align-items: center;
            }
        }

        .item-info {
            flex: 1;
        }

        .item-controls {
            display: flex;
            align-items: center;
            gap: 10px;
            justify-content: space-between;
        }

        @media (min-width: 768px) {
            .item-controls {
                justify-content: flex-end;
            }
        }

        .cantidad-carrito {
            display: flex;
            align-items: center;
            gap: 8px;
            margin: 5px 0;
            flex-wrap: wrap;
        }

        .btn-cantidad-carrito {
            width: 30px;
            height: 30px;
            border: none;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            cursor: pointer;
            font-size: 0.9em;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .cantidad-carrito-display {
            font-weight: bold;
            min-width: 30px;
            text-align: center;
        }

        .carrito-total {
            background: linear-gradient(135deg, #2c3e50, #34495e);
            color: white;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            margin-bottom: 15px;
        }

        .carrito-total h3 {
            font-size: clamp(1.2em, 3vw, 1.5em);
            margin-bottom: 8px;
        }

        .carrito-acciones {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        @media (min-width: 480px) {
            .carrito-acciones {
                flex-direction: row;
            }
        }

        .btn-whatsapp {
            flex: 1;
            padding: 12px 15px;
            background: linear-gradient(135deg, #25D366, #128C7E);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            cursor: pointer;
            transition: transform 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn-whatsapp:hover {
            transform: translateY(-2px);
        }

        .btn-limpiar {
            padding: 12px 15px;
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            cursor: pointer;
            transition: transform 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            min-width: 140px;
        }

        .btn-limpiar:hover {
            transform: translateY(-2px);
        }

        .error-message {
            background: #ffeaa7;
            color: #d63031;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            border-left: 5px solid #fd79a8;
            margin: 10px 0;
        }

        .loading {
            text-align: center;
            padding: 20px;
            color: #667eea;
            font-size: 1.1em;
        }

        .ejemplos {
            margin-top: 15px;
            font-size: 0.9em;
            color: #666;
            text-align: center;
        }

        .ejemplos-container {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            justify-content: center;
            margin-top: 8px;
        }

        .ejemplos span {
            background: #e9ecef;
            padding: 6px 10px;
            border-radius: 5px;
            cursor: pointer;
            transition: background 0.2s;
            font-size: 0.85em;
        }

        .ejemplos span:hover {
            background: #dee2e6;
        }

        .eliminar-item {
            background: #e74c3c;
            color: white;
            border: none;
            border-radius: 5px;
            padding: 8px 12px;
            cursor: pointer;
            font-size: 0.9em;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .tipo-precio {
            font-size: 0.8em;
            opacity: 0.8;
        }

        .subtotal {
            font-weight: bold;
            color: #2c3e50;
            font-size: 0.9em;
        }

        /* Animaciones */
        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        /* Scrollbar personalizado */
        .carrito-items::-webkit-scrollbar {
            width: 6px;
        }

        .carrito-items::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }

        .carrito-items::-webkit-scrollbar-thumb {
            background: #667eea;
            border-radius: 10px;
        }

        .carrito-items::-webkit-scrollbar-thumb:hover {
            background: #764ba2;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üõí Buscador de Precios</h1>
            <p>Consulta precios y arma tu pedido</p>
        </div>

        <div class="search-section">
            <div class="search-box">
                <input 
                    type="text" 
                    id="codigoInput" 
                    placeholder="Ingresa el c√≥digo del producto (ej: HD1192, 6852345547511)"
                    autocomplete="off"
                >
                <button id="buscarBtn">Buscar</button>
            </div>
            
            <div class="ejemplos">
                <strong>Ejemplos de c√≥digos:</strong>
                <div class="ejemplos-container">
                    <span onclick="usarEjemplo('HD1192')">HD1192</span>
                    <span onclick="usarEjemplo('6852345547511')">6852345547511</span>
                    <span onclick="usarEjemplo('HD3654')">HD3654</span>
                    <span onclick="usarEjemplo('HD5300')">HD5300</span>
                </div>
            </div>
        </div>

        <div class="result-section" id="resultSection">
            <!-- Aqu√≠ se mostrar√°n los resultados -->
        </div>

        <div class="carrito-section" id="carritoSection" style="display: none;">
            <div class="carrito-header">
                <h2>üõí Carrito de Compras</h2>
            </div>
            
            <div class="carrito-items" id="carritoItems">
                <!-- Aqu√≠ se mostrar√°n los items del carrito -->
            </div>

            <div class="carrito-total" id="carritoTotal">
                <h3>Total: $0.00</h3>
            </div>

            <div class="carrito-acciones">
                <button class="btn-whatsapp" onclick="enviarWhatsApp()">
                    <span>üì±</span>
                    <span>Enviar por WhatsApp</span>
                </button>
                <button class="btn-limpiar" onclick="limpiarCarrito()">
                    <span>üóëÔ∏è</span>
                    <span>Limpiar Carrito</span>
                </button>
            </div>
        </div>
    </div>

    <script>
        // Base de datos de productos (sin duplicados)
        const productos = {
            "6852345547511": { nombre: "AM HIGH QUALITY MOSQUITO NET. MOSQUITERO", rgn1: 10.00, rgn2: 8.33 },
            "7861038062483": { nombre: "ANTIBACTERIANTE", rgn1: 2.10, rgn2: 1.75 },
            "6202110243207": { nombre: "KIT PARA BEBE ACCESORIO HOGAR AM", rgn1: 1.60, rgn2: 1.00 },
            "HD1192": { nombre: "11 ARCOIRIS CH_CARCASA", rgn1: 1.00, rgn2: 0.50 },
            "HD1530": { nombre: "11 BORDE DE COLOR CH_CARCASA", rgn1: 1.00, rgn2: 0.50 },
            "HD1484": { nombre: "11 BROCHE UNICOLOR CH_CARCASA", rgn1: 1.00, rgn2: 0.50 },
            "HD1415": { nombre: "11 ESCARCHADO CON BROCHE CH_CARCASA", rgn1: 1.00, rgn2: 0.50 },
            "HD1507": { nombre: "11 FLOWERS CADENA CH_CARCASA", rgn1: 1.00, rgn2: 0.50 },
            "HD1179": { nombre: "11 LADYS SENCILLO CH_CARCASA", rgn1: 1.00, rgn2: 0.50 },
            "HD1438": { nombre: "11 LOVE CORAZON CH_CARCASA", rgn1: 1.00, rgn2: 0.50 },
            "HD1462": { nombre: "11 MAX AMOR - CARCASA", rgn1: 1.00, rgn2: 0.50 },
            "HD1311": { nombre: "11 MAX ANILLO_CARCASA", rgn1: 1.00, rgn2: 0.50 },
            "HD1403": { nombre: "11 MAX ANILLO_CARCASA", rgn1: 1.00, rgn2: 0.50 },
            "HD1167": { nombre: "11 MAX CADENA CORAZONES CH_CARCASA", rgn1: 1.00, rgn2: 0.50 },
            "HD1144": { nombre: "11 MAX CORAZON_CARCASA", rgn1: 1.00, rgn2: 0.50 },
            "HD1180": { nombre: "11 MAX LADYS SENCILLO CH_CARCASA", rgn1: 1.00, rgn2: 0.50 },
            "HD1052": { nombre: "11 MAX MATE CHINA_CARCASA", rgn1: 1.00, rgn2: 0.50 },
            "HD1216": { nombre: "11 MAX MATIZADO - CARCASA", rgn1: 1.00, rgn2: 0.50 },
            "HD1356": { nombre: "11 MAX PERLAS_CARCASA", rgn1: 1.00, rgn2: 0.50 },
            "HD1128": { nombre: "11 MAX PROTECTOR_CARCASA", rgn1: 1.00, rgn2: 0.50 },
            "HD1334": { nombre: "11 MAX SUPREME_CARCASA", rgn1: 1.00, rgn2: 0.50 },
            "HD1096": { nombre: "11 MAX TRANSPARENTE CH_CARCASA", rgn1: 0.20, rgn2: 0.10 },
            "HD1355": { nombre: "11 PERLAS - CARCASA", rgn1: 1.00, rgn2: 0.50 },
            "HD1238": { nombre: "11 RELIEVE FIGURAS CH_CARCASA", rgn1: 1.00, rgn2: 0.50 },
            "HD1297": { nombre: "11 TACOS PROTECTOR CH_CARCASA", rgn1: 1.00, rgn2: 0.50 },
            "HD1193": { nombre: "11MAX ARCOIRIS CH_CARCASA", rgn1: 1.00, rgn2: 0.50 },
            "HD1531": { nombre: "11MAX BORDE DE COLOR CH_CARCASA", rgn1: 1.00, rgn2: 0.50 },
            "HD1485": { nombre: "11MAX BROCHE UNICOLOR CH_CARCASA", rgn1: 1.00, rgn2: 0.50 },
            "HD1416": { nombre: "11MAX ESCARCHADO CON BROCHE CH_CARCASA", rgn1: 1.00, rgn2: 0.50 },
            "HD1508": { nombre: "11MAX FLOWERS CADENA CH_CARCASA", rgn1: 1.00, rgn2: 0.50 },
            "HD1275": { nombre: "11MAX IPHONE UNICOLOR CH_CARCASA", rgn1: 1.00, rgn2: 0.50 },
            "HD1380": { nombre: "11MAX LAZO GIRLS CH_CARCASA", rgn1: 1.00, rgn2: 0.50 },
            "HD1439": { nombre: "11MAX LOVE CORAZON CH_CARCASA", rgn1: 1.00, rgn2: 0.50 },
            "HD1239": { nombre: "11MAX RELIEVE FIGURAS CH_CARCASA", rgn1: 1.00, rgn2: 0.50 },
            "HD1262": { nombre: "11MAX SUPREME1 CH_CARCASA", rgn1: 1.00, rgn2: 0.50 },
            "HD1298": { nombre: "11MAX TACOS PROTECTOR CH_CARCASA", rgn1: 1.00, rgn2: 0.50 },
            "HD1824": { nombre: "18W FOCO CHINA", rgn1: 2.00, rgn2: 1.50 },
            "HD1461": { nombre: "1P 11 AMOR - CARCASA", rgn1: 1.00, rgn2: 0.50 },
            "HD3654": { nombre: "3654 GAFAS CHINA", rgn1: 3.50, rgn2: 2.50 },
            "HD3179": { nombre: "3D 05/2021 VISUALIZACION LAMPARA CREATIVE_FIG", rgn1: 4.50, rgn2: 2.80 },
            "HD5300": { nombre: "5300 TRANSPARENTE CHINA", rgn1: 1.00, rgn2: 0.50 },
            "HD5301": { nombre: "5301 TRANSPARENTE CHINA", rgn1: 1.60, rgn2: 1.00 },
            "HD5304": { nombre: "5304 TRANSPARENTE CHINA", rgn1: 1.60, rgn2: 1.00 },
            "HD5305": { nombre: "5305 TRANSPARENTE CHINA", rgn1: 1.60, rgn2: 1.00 },
            "HD5309": { nombre: "5309 CELESTE CHINA", rgn1: 1.60, rgn2: 1.00 },
            "HD5312": { nombre: "5312 ROSA CHINA", rgn1: 1.00, rgn2: 0.70 },
            "HD5313": { nombre: "5313 TRANSPARENTE CHINA", rgn1: 1.60, rgn2: 1.00 },
            "HD5314": { nombre: "5314 ROJO CHINA", rgn1: 2.30, rgn2: 1.40 },
            "HD5315": { nombre: "5315 FUCSIA CHINA", rgn1: 2.30, rgn2: 1.40 },
            "HD5316": { nombre: "5316 ROSA CHINA", rgn1: 2.30, rgn2: 1.40 },
            "HD5317": { nombre: "5317 CELESTE CHINA", rgn1: 2.30, rgn2: 1.40 },
            "HD5318": { nombre: "5318 TRANSPARENTE CHINA", rgn1: 1.20, rgn2: 0.80 },
            "HD5319": { nombre: "5319 FUCSIA CHINA", rgn1: 1.10, rgn2: 0.70 },
            "HD5320": { nombre: "5320 ROSA CHINA", rgn1: 1.10, rgn2: 0.70 },
            "HD5321": { nombre: "5321 CELESTE CHINA", rgn1: 1.10, rgn2: 0.70 },
            "HD3246": { nombre: "5363-2 WISKERO VASO 05/2021 LA CAJA ESTA 4,20", rgn1: 4.20, rgn2: 2.40 },
            "HD4457": { nombre: "570-5 RELOJ 30*30*4CM", rgn1: 4.00, rgn2: 2.20 },
            "HD1450": { nombre: "5S AMOR CH_CARCASA", rgn1: 1.00, rgn2: 0.50 },
            "HD1299": { nombre: "5S ANILLO ROSA CH_CARCASA", rgn1: 1.00, rgn2: 0.50 },
            "HD1181": { nombre: "5S ARCOIRIS CH_CARCASA", rgn1: 1.00, rgn2: 0.50 },
            "HD1519": { nombre: "5S BORDE DE COLOR CH_CARCASA", rgn1: 1.00, rgn2: 0.50 },
            "HD1473": { nombre: "5S BROCHE UNICOLOR CH_CARCASA", rgn1: 1.00, rgn2: 0.50 },
            "HD1155": { nombre: "5S CADENA CORAZONES CH_CARCASA", rgn1: 1.00, rgn2: 0.50 },
            "HD1132": { nombre: "5S CORAZON ESPEJO CH_CARCASA", rgn1: 1.00, rgn2: 0.50 },
            "HD1404": { nombre: "5S ESCARCHADO CON BROCHE CH_CARCASA", rgn1: 1.00, rgn2: 0.50 },
            "HD1496": { nombre: "5S FLOWERS CADENA CH_CARCASA", rgn1: 1.00, rgn2: 0.50 },
            "HD1263": { nombre: "5S IPHONE UNICOLOR CH_CARCASA", rgn1: 1.00, rgn2: 0.50 },
            "HD1168": { nombre: "5S LADYS SENCILLO CH_CARCASA", rgn1: 1.00, rgn2: 0.50 },
            "HD1368": { nombre: "5S LAZO GIRLS CH_CARCASA", rgn1: 1.00, rgn2: 0.50 },
            "HD1427": { nombre: "5S LOVE CORAZON CH_CARCASA", rgn1: 1.00, rgn2: 0.50 },
            "HD1204": { nombre: "5S MATIZADO CON DORADO CH_CARCASA", rgn1: 1.00, rgn2: 0.50 },
            "HD1345": { nombre: "5S PERLAS CORAZON CH_CARCASA", rgn1: 1.00, rgn2: 0.50 },
            "HD1115": { nombre: "5S PROTECTOR TELF CH_CARCASA", rgn1: 1.00, rgn2: 0.50 },
            "HD1227": { nombre: "5S RELIEVE FIGURAS CH_CARCASA", rgn1: 1.00, rgn2: 0.50 },
            "HD1391": { nombre: "5S STAR CH_CARCASA", rgn1: 1.00, rgn2: 0.50 },
            "HD1250": { nombre: "5S SUPREME1 CH-CARCASA", rgn1: 1.00, rgn2: 0.50 },
            "HD1322": { nombre: "5S SUPREME2 CH_CARCASA", rgn1: 1.00, rgn2: 0.50 },
            "HD1286": { nombre: "5S TACOS PROTECTOR CH_CARCASA", rgn1: 1.00, rgn2: 0.50 },
            "HD1103": { nombre: "5S TRANSPARENTE CH_CARCASA", rgn1: 1.00, rgn2: 0.50 },
            "HD1133": { nombre: "6 CORAZON ESPEJO CH_CARCASA", rgn1: 1.00, rgn2: 0.50 },
            "HD1453": { nombre: "6 PLUS AMOR_CARCASA", rgn1: 1.00, rgn2: 0.50 },
            "HD1301": { nombre: "6 PLUS ANILLO_CARCASA", rgn1: 1.00, rgn2: 0.50 },
            "HD1135": { nombre: "6 PLUS CORAZON_CARCASA", rgn1: 1.00, rgn2: 0.50 },
            "HD1371": { nombre: "6 PLUS LAZO_CARCASA", rgn1: 1.00, rgn2: 0.50 },
            "HD1207": { nombre: "6 PLUS MATIZADO_CARCASA", rgn1: 1.00, rgn2: 0.50 },
            "HD1367": { nombre: "6 PLUS PERLAS_CARCASA", rgn1: 1.00, rgn2: 0.50 },
            "HD1118": { nombre: "6 PLUS PROTECTOR_CARCASA", rgn1: 1.00, rgn2: 0.50 },
            "HD1394": { nombre: "6 PLUS STAR_CARCASA", rgn1: 1.00, rgn2: 0.50 },
            "HD1325": { nombre: "6 PLUS SUPREME - CARCASA", rgn1: 1.00, rgn2: 0.50 },
            "HD1253": { nombre: "6 PLUS SUPREME_CARCASA", rgn1: 1.00, rgn2: 0.50 },
            "HD1116": { nombre: "6 PROTECTOR TELF CH_CARCASA", rgn1: 1.00, rgn2: 0.50 },
            "HD3230": { nombre: "6118 AGENDAS GRANDE 05/2021", rgn1: 2.00, rgn2: 1.40 },
            "HD3231": { nombre: "6125 AGENDAS MEDIANA 05/2021", rgn1: 2.00, rgn2: 1.00 },
            "HD650": { nombre: "650 GAFAS CHINA", rgn1: 1.50, rgn2: 0.90 },
            "HD2248": { nombre: "652 GAFAS CHINA", rgn1: 1.40, rgn2: 0.90 },
            "HD2250": { nombre: "657 GAFAS CHINA", rgn1: 2.50, rgn2: 1.00 }
        };

        // Variables globales
        let carrito = [];
        let productoActual = null;
        let tipoPrecioSeleccionado = null;
        let cantidadActual = 1;

        // Elementos del DOM
        const codigoInput = document.getElementById('codigoInput');
        const buscarBtn = document.getElementById('buscarBtn');
        const resultSection = document.getElementById('resultSection');
        const carritoSection = document.getElementById('carritoSection');
        const carritoItems = document.getElementById('carritoItems');
        const carritoTotal = document.getElementById('carritoTotal');

        // Funci√≥n para buscar producto
        function buscarProducto() {
            const codigo = codigoInput.value.trim().toUpperCase();
            
            if (!codigo) {
                mostrarError('Por favor, ingresa un c√≥digo');
                return;
            }

            // Mostrar loading
            resultSection.innerHTML = '<div class="loading">Buscando producto...</div>';
            resultSection.style.display = 'block';

            // Resetear selecci√≥n
            productoActual = null;
            tipoPrecioSeleccionado = null;
            cantidadActual = 1;

            setTimeout(() => {
                const producto = productos[codigo];
                
                if (producto) {
                    productoActual = { ...producto, codigo: codigo };
                    mostrarResultado(producto, codigo);
                } else {
                    mostrarError('Producto no encontrado. Verifica el c√≥digo.');
                }
            }, 500);
        }

        // Funci√≥n para mostrar resultado
        function mostrarResultado(producto, codigo) {
            const html = `
                <div class="producto-info">
                    <h2>${producto.nombre}</h2>
                    <p><strong>C√≥digo:</strong> ${codigo}</p>
                    
                    <div class="precios">
                        <div class="precio-card" onclick="seleccionarPrecio('venta')" id="precioVenta">
                            <h3>üí∞ Precio Venta (RGN1)</h3>
                            <div class="precio-valor">$${producto.rgn1.toFixed(2)}</div>
                        </div>
                        <div class="precio-card mayor" onclick="seleccionarPrecio('mayor')" id="precioMayor">
                            <h3>üè¢ Precio Mayor (RGN2)</h3>
                            <div class="precio-valor">$${producto.rgn2.toFixed(2)}</div>
                        </div>
                    </div>

                    <div class="cantidad-section">
                        <h3>Cantidad:</h3>
                        <div class="cantidad-controls">
                            <button class="btn-cantidad" onclick="cambiarCantidad(-1)" ${cantidadActual <= 1 ? 'disabled' : ''}>-</button>
                            <span class="cantidad-display" id="cantidadDisplay">${cantidadActual}</span>
                            <button class="btn-cantidad" onclick="cambiarCantidad(1)">+</button>
                        </div>
                    </div>

                    <button class="agregar-carrito" id="btnAgregarCarrito" disabled onclick="agregarAlCarrito()">
                        üõí Agregar al Carrito (${cantidadActual} unidad${cantidadActual !== 1 ? 'es' : ''})
                    </button>
                </div>
            `;
            
            resultSection.innerHTML = html;
        }

        // Funci√≥n para cambiar cantidad
        function cambiarCantidad(cambio) {
            cantidadActual += cambio;
            
            // No permitir cantidades menores a 1
            if (cantidadActual < 1) {
                cantidadActual = 1;
            }
            
            // Actualizar display
            document.getElementById('cantidadDisplay').textContent = cantidadActual;
            
            // Actualizar bot√≥n de agregar al carrito
            const btnAgregar = document.getElementById('btnAgregarCarrito');
            btnAgregar.textContent = `üõí Agregar al Carrito (${cantidadActual} unidad${cantidadActual !== 1 ? 'es' : ''})`;
            
            // Actualizar botones de cantidad
            document.querySelector('.btn-cantidad').disabled = cantidadActual <= 1;
        }

        // Funci√≥n para seleccionar tipo de precio
        function seleccionarPrecio(tipo) {
            tipoPrecioSeleccionado = tipo;
            
            // Remover selecci√≥n anterior
            document.querySelectorAll('.precio-card').forEach(card => {
                card.classList.remove('seleccionado');
            });
            
            // Agregar selecci√≥n actual
            if (tipo === 'venta') {
                document.getElementById('precioVenta').classList.add('seleccionado');
            } else {
                document.getElementById('precioMayor').classList.add('seleccionado');
            }
            
            // Habilitar bot√≥n de agregar al carrito
            document.getElementById('btnAgregarCarrito').disabled = false;
        }

        // Funci√≥n para agregar producto al carrito
        function agregarAlCarrito() {
            if (!productoActual || !tipoPrecioSeleccionado) {
                mostrarError('Por favor, selecciona un tipo de precio');
                return;
            }

            const precio = tipoPrecioSeleccionado === 'venta' ? productoActual.rgn1 : productoActual.rgn2;
            
            const itemCarrito = {
                codigo: productoActual.codigo,
                nombre: productoActual.nombre,
                precio: precio,
                tipo: tipoPrecioSeleccionado,
                cantidad: cantidadActual
            };

            carrito.push(itemCarrito);
            actualizarCarrito();
            mostrarMensajeExito(`Agregado: ${cantidadActual} ${cantidadActual !== 1 ? 'unidades' : 'unidad'} de ${productoActual.nombre}`);
            
            // Resetear cantidad
            cantidadActual = 1;
        }

        // Funci√≥n para actualizar carrito
        function actualizarCarrito() {
            if (carrito.length === 0) {
                carritoSection.style.display = 'none';
                return;
            }

            carritoSection.style.display = 'block';
            
            // Actualizar items del carrito
            carritoItems.innerHTML = '';
            let total = 0;

            carrito.forEach((item, index) => {
                const subtotal = item.precio * item.cantidad;
                total += subtotal;
                
                const itemHTML = `
                    <div class="carrito-item">
                        <div class="item-info">
                            <strong>${item.nombre}</strong><br>
                            <small>C√≥digo: ${item.codigo}</small><br>
                            <small class="tipo-precio">Precio ${item.tipo === 'venta' ? 'Venta' : 'Mayor'}: $${item.precio.toFixed(2)} c/u</small>
                            <div class="cantidad-carrito">
                                <button class="btn-cantidad-carrito" onclick="cambiarCantidadCarrito(${index}, -1)">-</button>
                                <span class="cantidad-carrito-display">${item.cantidad}</span>
                                <button class="btn-cantidad-carrito" onclick="cambiarCantidadCarrito(${index}, 1)">+</button>
                                <span class="subtotal">Subtotal: $${subtotal.toFixed(2)}</span>
                            </div>
                        </div>
                        <div class="item-controls">
                            <button class="eliminar-item" onclick="eliminarDelCarrito(${index})">
                                <span>‚ùå</span>
                                <span>Eliminar</span>
                            </button>
                        </div>
                    </div>
                `;
                carritoItems.innerHTML += itemHTML;
            });

            // Actualizar total
            carritoTotal.innerHTML = `<h3>Total: $${total.toFixed(2)}</h3>`;
        }

        // Funci√≥n para cambiar cantidad en el carrito
        function cambiarCantidadCarrito(index, cambio) {
            carrito[index].cantidad += cambio;
            
            // No permitir cantidades menores a 1
            if (carrito[index].cantidad < 1) {
                carrito[index].cantidad = 1;
            }
            
            actualizarCarrito();
        }

        // Funci√≥n para eliminar item del carrito
        function eliminarDelCarrito(index) {
            const productoEliminado = carrito[index].nombre;
            carrito.splice(index, 1);
            actualizarCarrito();
            mostrarMensajeExito(`Eliminado: ${productoEliminado}`);
        }

        // Funci√≥n para limpiar carrito
        function limpiarCarrito() {
            carrito = [];
            actualizarCarrito();
            mostrarMensajeExito('Carrito limpiado');
        }

        // Funci√≥n para enviar por WhatsApp
        function enviarWhatsApp() {
            if (carrito.length === 0) {
                mostrarError('El carrito est√° vac√≠o');
                return;
            }

            let mensaje = "üõí *NUEVO PEDIDO* üõí\n\n";
            mensaje += "Hola, tengo un nuevo pedido:\n\n";
            mensaje += "üìã *DETALLE DEL PEDIDO:*\n\n";

            let total = 0;
            let numeroItem = 1;

            carrito.forEach(item => {
                const subtotal = item.precio * item.cantidad;
                total += subtotal;
                
                mensaje += `*${numeroItem}. ${item.nombre}*\n`;
                mensaje += `   üì¶ C√≥digo: ${item.codigo}\n`;
                mensaje += `   üî¢ Cantidad: ${item.cantidad}\n`;
                mensaje += `   üí∞ Precio unitario: $${item.precio.toFixed(2)}\n`;
                mensaje += `   üßÆ Subtotal: $${subtotal.toFixed(2)}\n\n`;
                
                numeroItem++;
            });

            mensaje += "‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\n";
            mensaje += `üí∞ *TOTAL DEL PEDIDO: $${total.toFixed(2)}*\n`;
            mensaje += "‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\n\n";
            mensaje += "üìû Cliente espera confirmaci√≥n\n";
            mensaje += "‚è∞ Por favor confirmar disponibilidad\n\n";
            mensaje += "¬°Gracias! üôè";

            // Codificar mensaje para URL
            const mensajeCodificado = encodeURIComponent(mensaje);
            const numeroWhatsApp = "593986122265";
            
            // Crear URL de WhatsApp
            const urlWhatsApp = `https://wa.me/${numeroWhatsApp}?text=${mensajeCodificado}`;
            
            // Abrir en nueva ventana
            window.open(urlWhatsApp, '_blank');
        }

        // Funci√≥n para mostrar mensaje de √©xito
        function mostrarMensajeExito(mensaje) {
            const alerta = document.createElement('div');
            alerta.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: #2ecc71;
                color: white;
                padding: 15px 20px;
                border-radius: 10px;
                box-shadow: 0 5px 15px rgba(0,0,0,0.2);
                z-index: 1000;
                animation: slideIn 0.3s ease;
                max-width: 90%;
                word-wrap: break-word;
            `;
            alerta.textContent = mensaje;
            document.body.appendChild(alerta);

            setTimeout(() => {
                alerta.remove();
            }, 3000);
        }

        // Funci√≥n para mostrar error
        function mostrarError(mensaje) {
            resultSection.innerHTML = `
                <div class="error-message">
                    <h3>‚ùå Error</h3>
                    <p>${mensaje}</p>
                </div>
            `;
            resultSection.style.display = 'block';
        }

        // Funci√≥n para usar ejemplos
        function usarEjemplo(codigo) {
            codigoInput.value = codigo;
            buscarProducto();
        }

        // Event listeners
        buscarBtn.addEventListener('click', buscarProducto);
        
        codigoInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                buscarProducto();
            }
        });

        // Enfocar el input al cargar la p√°gina
        window.addEventListener('load', function() {
            codigoInput.focus();
        });

        // Mostrar cantidad de productos cargados
        console.log(`‚úÖ Base de datos cargada: ${Object.keys(productos).length} productos disponibles`);
    </script>
</body>
</html>
